!function(e){if(!("EventSource"in e)){var t=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,r=function(e){function r(e){n._pollTimer=setTimeout(function(){a.call(n)},e)}function a(){try{if(n.readyState==n.CLOSED)return;var e=new XMLHttpRequest;e.open("GET",n.URL,!0),e.setRequestHeader("Accept","text/event-stream"),e.setRequestHeader("Cache-Control","no-cache"),e.setRequestHeader("X-Requested-With","XMLHttpRequest"),null!=l&&e.setRequestHeader("Last-Event-ID",l),o="",e.timeout=5e4,e.onreadystatechange=function(){if(3==this.readyState||4==this.readyState&&200==this.status){n.readyState==n.CONNECTING&&(n.readyState=n.OPEN,n.dispatchEvent("open",{type:"open"}));var e="";try{e=this.responseText||""}catch(a){}var h=e.substr(o.length).split("\n"),d="message",u=[],c=0,p="";for(o=e;c<h.length;c++)if(p=h[c].replace(t,""),0==p.indexOf("event"))d=p.replace(/event:?\s*/,"");else if(0==p.indexOf("retry")){var f=parseInt(p.replace(/retry:?\s*/,""));isNaN(f)||(i=f)}else if(0==p.indexOf("data"))u.push(p.replace(/data:?\s*/,""));else if(0==p.indexOf("id:"))l=p.replace(/id:?\s*/,"");else if(0==p.indexOf("id"))l=null;else if(""==p&&u.length){var v=new s(u.join("\n"),n.url,l);n.dispatchEvent(d,v),u=[],d="message"}4==this.readyState&&r(i)}else n.readyState!==n.CLOSED&&(4==this.readyState?(n.readyState=n.CONNECTING,n.dispatchEvent("error",{type:"error"}),r(i)):0==this.readyState&&r(i))},e.send(),setTimeout(function(){e.abort()},e.timeout),n._xhr=e}catch(a){n.dispatchEvent("error",{type:"error",data:a.message})}}var n=this,i=500,l=null,o="";if(!e||"string"!=typeof e)throw new SyntaxError("Not enough arguments");this.URL=e,this.readyState=this.CONNECTING,this._pollTimer=null,this._xhr=null,a()};r.prototype={close:function(){this.readyState=this.CLOSED,clearInterval(this._pollTimer),this._xhr.abort()},CONNECTING:0,OPEN:1,CLOSED:2,dispatchEvent:function(e,t){var r=this["_"+e+"Handlers"];if(r)for(var s=0;s<r.length;s++)r[s].call(this,t);this["on"+e]&&this["on"+e].call(this,t)},addEventListener:function(e,t){this["_"+e+"Handlers"]||(this["_"+e+"Handlers"]=[]),this["_"+e+"Handlers"].push(t)},removeEventListener:function(e,t){var r=this["_"+e+"Handlers"];if(r)for(var s=r.length-1;s>=0;--s)if(r[s]===t){r.splice(s,1);break}},onerror:null,onmessage:null,onopen:null,readyState:0,URL:""};var s=function(e,t,r){this.data=e,this.origin=t,this.lastEventId=r||""};s.prototype={data:null,type:"message",lastEventId:"",origin:""},"module"in e&&(module.exports=r),e.EventSource=r}}(this);